(this.webpackJsonpscreen=this.webpackJsonpscreen||[]).push([[0],{12:function(t,e,n){},14:function(t,e,n){},15:function(t,e,n){"use strict";n.r(e);var i=n(1),o=n.n(i),a=n(7),s=n.n(a),c=(n(12),n(2)),r=n(3),d=n(5),h=n(4),l=n(17),g=n(0),u=[],v=null,f={},m=function(){function t(e,n,i,o){Object(c.a)(this,t),this.context=void 0,this.params=void 0,this.opacity=void 0,this.x=void 0,this.y=void 0,this.moveX=void 0;var a=i.fontSize||48;this.x=window.innerWidth,this.y=i.range[0]*e.height+(i.range[1]-i.range[0])*e.height*Math.random()+36,this.y<a?this.y=a:this.y>e.height-a&&(this.y=e.height-a),this.moveX=1+3*Math.random(),this.context=n,this.opacity=.8+.2*Math.random(),this.params=i}return Object(r.a)(t,[{key:"draw",value:function(){var t=this.context,e=this.params;t.strokeStyle=e.color,t.font="bold "+(e.fontSize||48)+'px "microsoft yahei", sans-serif',t.fillStyle="rgba(255,255,255,"+this.opacity+")",t.fillText(e.value,this.x,this.y),t.strokeText(e.value,this.x,this.y)}}]),t}(),p=function(t){Object(d.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(c.a)(this,n),(i=e.call(this,t)).deviceId="",i.ws=void 0,i.hbStarted=!1,i.registered=!1,i.registerResp=!1,i.reg=void 0,i.canvas=void 0,i.context=void 0,i.componentDidMount=function(){i.canvas=document.querySelector("#canvasBarrage"),i.context=i.canvas.getContext("2d"),i.init()},i.init=function(){var t=i.props.baseUrl,e="https:"==document.location.protocol,n="".concat(e?"wss:":"ws:","//").concat(t,":8080"),o=new window.WebSocket(n);i.ws=o,o.onopen=i.openSocket,o.onmessage=i.onMessage,o.onclose=i.closeSocket},i.openSocket=function(){i.ws.send("RG#"+i.deviceId)},i.closeSocket=function(){},i.onMessage=function(t){console.log("data:",t.data);if(t.data.startsWith("NF#")){var e=JSON.parse(t.data.substr(3)),n={value:e.from+"\u8bf4\uff1a"+e.message,color:e.color||"blue",range:[0,.5]};return u.push(n),u.forEach((function(t,e){f[e]||(f[e]=new m(i.canvas,i.context,t,e))})),v&&window.cancelAnimationFrame(v),void function t(){i.context.clearRect(0,0,i.canvas.width,i.canvas.height),function(t){if(t)for(var e in t.width=t.clientWidth,t.height=t.clientHeight,f){var n=e,i=f[e],o=i.fontSize||48;i.x-=i.moveX,i.x<-1*window.innerWidth*1?(i.x=(1+.1*n/Math.random())*t.width,i.y=(i.params.range[0]+(i.params.range[1]-i.params.range[0])*Math.random())*t.height,i.y<o?i.y=o:i.y>t.height-o&&(i.y=t.height-o),i.moveX=1+3*Math.random()):i.draw()}}(i.canvas),v=window.requestAnimationFrame(t)}()}if(!i.hbStarted&&t.data.startsWith("RO#"))return console.log("login successfully"),i.registered||(i.registered=!0,i.ws.send(JSON.stringify(i.reg))),i.hbStarted=!0,void setInterval((function(){i.ws.send("H1")}),15e3)};var o=window.localStorage.getItem("s-deviceId");i.deviceId=o||l.a().replace(/-/g,"").substr(0,8),window.localStorage.setItem("s-deviceId",i.deviceId);var a=new Date;return i.reg={method:"GET",host:"".concat(t.baseUrl,":8080"),querys:{docId:"devs",type:"screen",userId:i.deviceId},headers:{"x-ca-websocket_api_type":["REGISTER"],"x-ca-seq":["0"],"x-ca-nonce":[l.a().toString()],date:[a.toUTCString()],"x-ca-timestamp":[a.getTime().toString()],CA_VERSION:["1"]},path:"/r",body:""},i}return Object(r.a)(n,[{key:"render",value:function(){return Object(g.jsx)("div",{children:Object(g.jsx)("canvas",{id:"canvasBarrage",style:{height:window.innerHeight,width:"100%"},height:window.innerHeight})})}}]),n}(i.Component),w=p,b=function(t){Object(d.a)(n,t);var e=Object(h.a)(n);function n(t){var i;return Object(c.a)(this,n),(i=e.call(this,t)).componentDidMount=function(){},i}return Object(r.a)(n,[{key:"render",value:function(){return Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{style:{fontSize:"24px",color:"white",position:"absolute",left:0,right:0,textAlign:"center",bottom:60},children:[Object(g.jsx)("div",{style:{marginBottom:12,fontWeight:"bold"},children:"\u6b22\u8fce\u626b\u63cf\u5c4f\u5e55\u4e0b\u4e8c\u7ef4\u7801\uff0c\u8ddf\u963f\u91cc\u4e91 Serverless \u53d1\u5f39\u5e55\u4e92\u52a8"}),Object(g.jsx)("img",{src:"https://img.alicdn.com/imgextra/i4/O1CN01RPyWwn1hVCg03f6Xc_!!6000000004282-2-tps-354-360.png",style:{width:240,height:240}})]}),Object(g.jsx)(w,{baseUrl:window.location.host,onData:function(){}})]})}}]),n}(i.Component);n(14);var x=function(){return Object(g.jsx)("div",{className:"App",children:Object(g.jsx)(b,{})})},y=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(e){var n=e.getCLS,i=e.getFID,o=e.getFCP,a=e.getLCP,s=e.getTTFB;n(t),i(t),o(t),a(t),s(t)}))};s.a.render(Object(g.jsx)(o.a.StrictMode,{children:Object(g.jsx)(x,{})}),document.getElementById("root")),y()}},[[15,1,2]]]);
//# sourceMappingURL=main.38e8c486.chunk.js.map